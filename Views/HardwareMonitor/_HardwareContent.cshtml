@using TSysWatch
@using TSysWatch.Models
@model HardwareMonitorViewModel

<!-- CPU ‰ø°ÊÅØ -->
@if (Model.CpuInfos != null && Model.CpuInfos.Count > 0)
{
    <div class="hardware-section cpu-section">
        <div class="section-title">
            <span class="title-icon">‚öôÔ∏è</span>
            <span class="title-text">CPU (Â§ÑÁêÜÂô®)</span>
        </div>
        @foreach (var cpu in Model.CpuInfos)
        {
            <div class="hardware-card">
                <div class="hardware-name">
                    <span>@cpu.Name</span>
                    <span class="hardware-type">@cpu.HardwareType</span>
                </div>
                <div class="sensor-list">
                    @if (cpu.Sensors != null && cpu.Sensors.Count > 0)
                    {
                        @foreach (var sensor in cpu.Sensors)
                        {
                            <div class="sensor-item">
                                <div class="sensor-header">
                                    <span class="sensor-name">@sensor.Name</span>
                                    <span class="sensor-status @GetStatusClass(sensor.Status)">@GetStatusText(sensor.Status)</span>
                                </div>
                                <div class="sensor-value">
                                    @sensor.Value.ToString("F2")<span class="sensor-unit">@sensor.Unit</span>
                                </div>
                                @if (sensor.Min.HasValue || sensor.Max.HasValue)
                                {
                                    <div class="sensor-minmax">
                                        @if (sensor.Min.HasValue) { <span>ÊúÄÂ∞è: @sensor.Min.Value.ToString("F2")@sensor.Unit</span> }
                                        @if (sensor.Max.HasValue) { <span>ÊúÄÂ§ß: @sensor.Max.Value.ToString("F2")@sensor.Unit</span> }
                                    </div>
                                }
                            </div>
                        }
                    }
                    else
                    {
                        <div class="no-data">ÊöÇÊó†‰º†ÊÑüÂô®Êï∞ÊçÆ</div>
                    }
                </div>
                @if (cpu.SubHardwares != null && cpu.SubHardwares.Count > 0)
                {
                    <div class="sub-hardware-list">
                        @foreach (var sub in cpu.SubHardwares)
                        {
                            <div class="sub-hardware-card">
                                <div class="sub-hardware-name">@sub.Name</div>
                                <div class="sensor-list">
                                    @if (sub.Sensors != null && sub.Sensors.Count > 0)
                                    {
                                        @foreach (var sensor in sub.Sensors)
                                        {
                                            <div class="sensor-item">
                                                <span class="sensor-name">@sensor.Name</span>
                                                <span class="sensor-value">@sensor.Value.ToString("F2") @sensor.Unit</span>
                                            </div>
                                        }
                                    }
                                </div>
                            </div>
                        }
                    </div>
                }
            </div>
        }
    </div>
}

<!-- GPU ‰ø°ÊÅØ -->
@if (Model.GpuInfos != null && Model.GpuInfos.Count > 0)
{
    <div class="hardware-section gpu-section">
        <div class="section-title">
            <span class="title-icon">üéÆ</span>
            <span class="title-text">GPU (ÊòæÂç°)</span>
        </div>
        @foreach (var gpu in Model.GpuInfos)
        {
            <div class="hardware-card">
                <div class="hardware-name">
                    <span>@gpu.Name</span>
                    <span class="hardware-type">@gpu.HardwareType</span>
                </div>
                <div class="sensor-list">
                    @if (gpu.Sensors != null && gpu.Sensors.Count > 0)
                    {
                        @foreach (var sensor in gpu.Sensors)
                        {
                            <div class="sensor-item">
                                <span class="sensor-name">@sensor.Name</span>
                                <span class="sensor-value">@sensor.Value.ToString("F2") @sensor.Unit</span>
                            </div>
                        }
                    }
                </div>
            </div>
        }
    </div>
}

<!-- ÂÜÖÂ≠ò‰ø°ÊÅØ -->
@if (Model.MemoryInfo != null)
{
    <div class="hardware-section memory-section">
        <div class="section-title">
            <span class="title-icon">üíæ</span>
            <span class="title-text">RAM (ÂÜÖÂ≠ò)</span>
        </div>
        <div class="hardware-card">
            <div class="hardware-name">@Model.MemoryInfo.Name</div>
            <div class="sensor-list">
                @if (Model.MemoryInfo.Sensors != null && Model.MemoryInfo.Sensors.Count > 0)
                {
                    @foreach (var sensor in Model.MemoryInfo.Sensors)
                    {
                        <div class="sensor-item">
                            <span class="sensor-name">@sensor.Name</span>
                            <span class="sensor-value">@sensor.Value.ToString("F2") @sensor.Unit</span>
                        </div>
                    }
                }
            </div>
        </div>
    </div>
}

<!-- Â≠òÂÇ®‰ø°ÊÅØ -->
@if (Model.StorageInfos != null && Model.StorageInfos.Count > 0)
{
    <div class="hardware-section storage-section">
        <div class="section-title">
            <span class="title-icon">üíø</span>
            <span class="title-text">Â≠òÂÇ®</span>
        </div>
        @foreach (var storage in Model.StorageInfos)
        {
            <div class="hardware-card">
                <div class="hardware-name">
                    <span>@storage.Name</span>
                    <span class="hardware-type">@storage.HardwareType</span>
                </div>
                <div class="sensor-list">
                    @if (storage.Sensors != null && storage.Sensors.Count > 0)
                    {
                        @foreach (var sensor in storage.Sensors)
                        {
                            <div class="sensor-item">
                                <span class="sensor-name">@sensor.Name</span>
                                <span class="sensor-value">@sensor.Value.ToString("F2") @sensor.Unit</span>
                            </div>
                        }
                    }
                </div>
            </div>
        }
    </div>
}

<!-- ‰∏ªÊùø‰ø°ÊÅØ -->
@if (Model.MotherboardInfos != null && Model.MotherboardInfos.Count > 0)
{
    <div class="hardware-section motherboard-section">
        <div class="section-title">
            <span class="title-icon">üñ•Ô∏è</span>
            <span class="title-text">‰∏ªÊùø</span>
        </div>
        @foreach (var mobo in Model.MotherboardInfos)
        {
            <div class="hardware-card">
                <div class="hardware-name">@mobo.Name</div>
                <div class="sensor-list">
                    @if (mobo.Sensors != null && mobo.Sensors.Count > 0)
                    {
                        @foreach (var sensor in mobo.Sensors)
                        {
                            <div class="sensor-item">
                                <span class="sensor-name">@sensor.Name</span>
                                <span class="sensor-value">@sensor.Value.ToString("F2") @sensor.Unit</span>
                            </div>
                        }
                    }
                </div>
            </div>
        }
    </div>
}

<!-- ÁΩëÁªú‰ø°ÊÅØ -->
@if (Model.NetworkInfos != null && Model.NetworkInfos.Count > 0)
{
    <div class="hardware-section network-section">
        <div class="section-title">
            <span class="title-icon">üåê</span>
            <span class="title-text">ÁΩëÁªú</span>
        </div>
        @foreach (var net in Model.NetworkInfos)
        {
            <div class="hardware-card">
                <div class="hardware-name">@net.Name</div>
                <div class="sensor-list">
                    @if (net.Sensors != null && net.Sensors.Count > 0)
                    {
                        @foreach (var sensor in net.Sensors)
                        {
                            <div class="sensor-item">
                                <span class="sensor-name">@sensor.Name</span>
                                <span class="sensor-value">@sensor.Value.ToString("F2") @sensor.Unit</span>
                            </div>
                        }
                    }
                </div>
            </div>
        }
    </div>
}

<!-- ÁîµÊ∫ê‰ø°ÊÅØ -->
@if (Model.PowerSupplyInfo != null)
{
    <div class="hardware-section psu-section">
        <div class="section-title">
            <span class="title-icon">‚ö°</span>
            <span class="title-text">ÁîµÊ∫ê</span>
        </div>
        <div class="hardware-card">
            <div class="hardware-name">@Model.PowerSupplyInfo.Name</div>
            <div class="sensor-list">
                @if (Model.PowerSupplyInfo.Sensors != null && Model.PowerSupplyInfo.Sensors.Count > 0)
                {
                    @foreach (var sensor in Model.PowerSupplyInfo.Sensors)
                    {
                        <div class="sensor-item">
                            <span class="sensor-name">@sensor.Name</span>
                            <span class="sensor-value">@sensor.Value.ToString("F2") @sensor.Unit</span>
                        </div>
                    }
                }
            </div>
        </div>
    </div>
}

<!-- ÁîµÊ±†‰ø°ÊÅØ -->
@if (Model.BatteryInfo != null)
{
    <div class="hardware-section battery-section">
        <div class="section-title">
            <span class="title-icon">üîã</span>
            <span class="title-text">ÁîµÊ±†</span>
        </div>
        <div class="hardware-card">
            <div class="hardware-name">@Model.BatteryInfo.Name</div>
            <div class="sensor-list">
                @if (Model.BatteryInfo.Sensors != null && Model.BatteryInfo.Sensors.Count > 0)
                {
                    @foreach (var sensor in Model.BatteryInfo.Sensors)
                    {
                        <div class="sensor-item">
                            <span class="sensor-name">@sensor.Name</span>
                            <span class="sensor-value">@sensor.Value.ToString("F2") @sensor.Unit</span>
                        </div>
                    }
                }
            </div>
        </div>
    </div>
}

@functions {
    private string GetStatusClass(string status)
    {
        return status switch
        {
            "warning" => "status-warning",
            "critical" => "status-critical",
            _ => "status-normal"
        };
    }

    private string GetStatusText(string status)
    {
        return status switch
        {
            "warning" => "Ë≠¶Âëä",
            "critical" => "‰∏•Èáç",
            _ => "Ê≠£Â∏∏"
        };
    }
}
